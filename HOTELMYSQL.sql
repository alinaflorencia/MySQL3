DROP TABLE  IF EXISTS TRANS;
DROP TABLE  IF EXISTS USEFAS;
DROP TABLE  IF EXISTS DCHECKIN;
DROP TABLE  IF EXISTS HCHECKIN;
DROP TABLE  IF EXISTS FASILITAS;
DROP TABLE  IF EXISTS CUSTOMER;
DROP TABLE  IF EXISTS KAMAR;
DROP TABLE  IF EXISTS JENISKAMAR;

CREATE TABLE JENISKAMAR
(
KODEJENIS VARCHAR(3) PRIMARY KEY,
NAMAJENIS VARCHAR(20) NOT NULL,
HARGA INT(6) NOT NULL
);

INSERT INTO JENISKAMAR VALUES('S01', 'STANDARD', 110000);
INSERT INTO JENISKAMAR VALUES('D01', 'DELUXE', 175000);
INSERT INTO JENISKAMAR VALUES('V01', 'VIP', 250000);
INSERT INTO JENISKAMAR VALUES('P01', 'PRESIDENT SUITE', 400000);

CREATE TABLE KAMAR
(
NOKAMAR VARCHAR(3) PRIMARY KEY,
KODEJENIS VARCHAR(3) REFERENCES JENISKAMAR(KODEJENIS),
STATUS VARCHAR(1) NOT NULL
);

INSERT INTO KAMAR VALUES('101', 'S01', '0');
INSERT INTO KAMAR VALUES('112', 'S01', '1');
INSERT INTO KAMAR VALUES('201', 'D01', '0');
INSERT INTO KAMAR VALUES('220', 'V01', '0');
INSERT INTO KAMAR VALUES('405', 'P01', '1');


CREATE TABLE CUSTOMER
(
KODECUST VARCHAR(6) PRIMARY KEY,
NAMA VARCHAR(20) NOT NULL,
ALAMAT VARCHAR(30) NOT NULL,
KOTA VARCHAR(15) NOT NULL,
TELEPON VARCHAR(15) NOT NULL
);

INSERT INTO CUSTOMER VALUES('C00001', 'YOHANES KAREL', 'RAMPAL KULON 12', 'MALANG', '6503478');
INSERT INTO CUSTOMER VALUES('C00002', 'YUSAK WINATA', 'MASPATI III/25', 'SURABAYA', '5934485');
INSERT INTO CUSTOMER VALUES('C00003', 'LISTYA ARINI', 'MAWAR 14', 'JAKARTA', '5934485');
INSERT INTO CUSTOMER VALUES('C00004', 'YOLANDA HIDAYATI', 'TALANG 1', 'MALANG', '7894455');


CREATE TABLE FASILITAS
(
KODEFASILITAS VARCHAR(4) PRIMARY KEY,
NAMAFASILITAS VARCHAR(20) NOT NULL,
HARGA INT(6)
);

INSERT INTO FASILITAS VALUES('F001', 'EXTRA BED', 30000);
INSERT INTO FASILITAS VALUES('F002', 'EXTRA HANDUK', 15000);
INSERT INTO FASILITAS VALUES('F003', 'SANDAL KAMAR', 45000);
INSERT INTO FASILITAS VALUES('F004', 'LAUNDRY', 3000);
INSERT INTO FASILITAS VALUES('F005', 'HANGER', 12500);



CREATE TABLE HCHECKIN
(
KODECIN VARCHAR(6) PRIMARY KEY,
KODECUST VARCHAR(6) REFERENCES CUSTOMER(KODECUST),
TGLCIN DATE NOT NULL,
JAMCIN VARCHAR(4) NOT NULL
);

INSERT INTO HCHECKIN VALUES('T00001', 'C00001', '2017-06-08', '0900');
INSERT INTO HCHECKIN VALUES('T00002', 'C00002', '2017-07-12', '0930');
INSERT INTO HCHECKIN VALUES('T00003', 'C00003', '2017-08-11', '0800');
INSERT INTO HCHECKIN VALUES('T00004', 'C00004', '2017-08-11', '1000');

SELECT * FROM HCHECKIN;


CREATE TABLE DCHECKIN
(
KODECIN VARCHAR(6) REFERENCES HCHECKIN(KODECIN),
NOKAMAR VARCHAR(3) REFERENCES KAMAR(NOKAMAR),
TGLCOUT DATE,
KODEUSEFAS VARCHAR(9) UNIQUE
);

INSERT INTO DCHECKIN VALUES('T00001', '101', '2017-06-12', 'T00001101');
INSERT INTO DCHECKIN VALUES('T00002', '201', '2017-07-14', 'T00002201');
INSERT INTO DCHECKIN VALUES('T00002', '220', '2017-07-14', 'T00002220');
INSERT INTO DCHECKIN VALUES('T00003', '112', '2017-08-19', 'T00003112');
INSERT INTO DCHECKIN VALUES('T00004', '405', '2017-08-20', 'T00004405');

SELECT * FROM DCHECKIN;


CREATE TABLE USEFAS
(
KODEUSEFAS VARCHAR(9) REFERENCES DHCECKIN(KODEUSEFAS),
KODEFASILITAS VARCHAR(4) REFERENCES FASILITAS(KODEFASILITAS),
JUMLAH INT(3) NOT NULL
);

INSERT INTO USEFAS VALUES('T00001101', 'F001', 1);
INSERT INTO USEFAS VALUES('T00001101', 'F002', 4);
INSERT INTO USEFAS VALUES('T00002201', 'F001', 2);
INSERT INTO USEFAS VALUES('T00003112', 'F004', 8);
INSERT INTO USEFAS VALUES('T00003112', 'F003', 2);


CREATE TABLE TRANS
(
KODETRANS VARCHAR(6) PRIMARY KEY,
TGLTRANS DATE,
JAMTRANS VARCHAR(4),
KODECIN VARCHAR(6) REFERENCES HCHECKIN(KODECIN)
);

INSERT INTO TRANS VALUES('N00001', '2017-06-12', '1000', 'T00001');
INSERT INTO TRANS VALUES('N00002', '2017-06-14', '1300', 'T00002');










